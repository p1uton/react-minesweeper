(this["webpackJsonpreact-minesweeper"]=this["webpackJsonpreact-minesweeper"]||[]).push([[0],{10:function(e,n,t){"use strict";t.r(n);var i=t(0),r=t.n(i),o=t(3),c=t.n(o),a=(t(9),t(1)),u=function(e,n){var t=Math.abs(e.col-n.col),i=Math.abs(e.row-n.row);return 1===t&&1===i||0===t&&1===i||1===t&&0===i},l=function(e,n){return e.filter((function(e){return e.id===n})).shift()},s=function(e,n){if(0!==e.filter((function(e){return e.isOpen&&e.isMine})).length)return 3;var t=e.filter((function(e){return e.isMine&&!e.isFlag})).length,i=e.filter((function(e){return!e.isMine&&!e.isOpen})).length;return 0===t&&0===i?2:n},f=function(e){for(var n=e.rows,t=e.cols,i=e.mines,r=[],o=0;o<n;o++)for(var c=0;c<t;c++)r.push({id:o*t+c,row:o,col:c,isOpen:!1,isMine:!1,isFlag:!1,isMouseDown:!1,minesNext:0});for(var a=i;a>0;){var l=Math.floor(Math.random()*r.length);r[l].isMine||(r[l].isMine=!0,a--)}return r.map((function(e){return e.minesNext=r.filter((function(n){return u(e,n)&&n.isMine})).length,e})),r},m=function(e){var n=e.cell,t=e.status,i=e.onClick,o=e.onMouseDown,c=e.onMouseUp,a=["cell"];return 0===t?a.push("cell-closed"):n.isOpen?n.isMine?a.push("cell-mine","cell-detonated"):0!==n.minesNext&&a.push("cell-"+n.minesNext):n.isFlag?1===t?a.push("cell-closed","cell-flag","cell-flag-red"):2!==t&&3!==t||(n.isMine?a.push("cell-closed","cell-flag","cell-flag-green"):a.push("cell-closed","cell-flag","cell-flag-gray")):n.isMine&&3===t?a.push("cell-mine"):n.isMouseDown||a.push("cell-closed"),r.a.createElement("div",{className:a.join(" "),onClick:function(e){return i(e,n.id,!1)},onContextMenu:function(e){return i(e,n.id,!0)},onMouseDown:function(e){return o(e,n.id)},onMouseUp:function(e){return c(e,n.id)}})},p=[{id:0,name:"Beginner",rows:8,cols:8,mines:10},{id:1,name:"Intermediate",rows:16,cols:16,mines:40},{id:2,name:"Expert",rows:16,cols:30,mines:99}];var d=function(){var e=Object(i.useState)((function(){return 1})),n=Object(a.a)(e,2),t=n[0],o=n[1],c=Object(i.useState)((function(){return 0})),d=Object(a.a)(c,2),v=d[0],g=d[1],h=Object(i.useState)((function(){return 0})),M=Object(a.a)(h,2),w=M[0],O=M[1],b=Object(i.useState)((function(){return f(p[t])})),E=Object(a.a)(b,2),N=E[0],k=E[1];Object(i.useEffect)((function(){if(1===v){var e=setInterval((function(){O((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}}),[v]);var F=function(e,n,t){if(e.preventDefault(),2!==v&&3!==v){0===v&&g(1);var i=N.concat(),r=l(i,n);t?r.isOpen||x(i,n):r.isFlag||(r.isOpen?r.minesNext===function(e,n){var t=l(e,n);return e.filter((function(e){return u(e,t)&&e.isFlag})).length}(i,n)&&(i.filter((function(e){return u(e,r)&&!e.isOpen&&!e.isFlag&&e.isMine})).map((function(e){return y(i,e.id)})),3!==s(i,v)&&i.filter((function(e){return u(e,r)&&!e.isOpen&&!e.isFlag})).map((function(e){return y(i,e.id)}))):y(i,n)),k(i),g((function(e){return s(i,e)}))}},D=function(e,n){e.preventDefault();var t=N.concat(),i=l(t,n);i.isOpen&&(t.filter((function(e){return u(e,i)&&!e.isOpen&&!e.isFlag})).map((function(e){return e.isMouseDown=!0})),k(t))},j=function(e,n){e.preventDefault();var t=N.concat(),i=l(t,n);i.isOpen&&(t.filter((function(e){return u(e,i)&&!e.isOpen&&!e.isFlag})).map((function(e){return e.isMouseDown=!1})),k(t))},x=function(e,n){e.map((function(e){return e.id===n?e.isFlag=!e.isFlag:null}))},y=function e(n,t){n.map((function(e){return e.id===t?e.isOpen=!0:null}));var i=l(n,t);i.isMine||0!==i.minesNext||n.filter((function(e){return u(e,i)&&!e.isOpen&&!e.isFlag})).map((function(t){return e(n,t.id)}))},C=function(e){o(e),g(0),O(0),k(f(p[e]))};return r.a.createElement("div",null,r.a.createElement("div",{className:"container",style:{width:20*p[t].cols}},r.a.createElement("div",{className:"topbar"},r.a.createElement("div",{className:"topbar-block"},N.filter((function(e){return e.isMine})).length-N.filter((function(e){return e.isFlag})).length),r.a.createElement("div",{className:"status status"+v,onClick:function(e){return function(e){e.preventDefault(),C(t)}(e)}}),r.a.createElement("div",{className:"topbar-block"},w)),r.a.createElement("div",{className:"field",style:{width:20*p[t].cols,height:20*p[t].rows}},N.map((function(e){return r.a.createElement(m,{key:e.id,cell:e,status:v,onClick:F,onMouseDown:D,onMouseUp:j})}))),r.a.createElement("div",{className:"bottombar"},p.map((function(e){return r.a.createElement("input",{type:"button",value:e.name,onClick:function(n){return function(e,n){e.preventDefault(),C(n)}(n,e.id)},key:e.id})})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(d,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},4:function(e,n,t){e.exports=t(10)},9:function(e,n,t){}},[[4,1,2]]]);
//# sourceMappingURL=main.af49ce73.chunk.js.map