{"version":3,"sources":["components/Cell/Cell.module.css","components/Status/Status.module.css","components/Field/Field.module.css","components/App/App.module.css","components/LevelSelector/LevelSelector.module.css","components/Timer/Timer.module.css","components/Counter/Counter.module.css","components/TopBar/TopBar.module.css","consts.js","actions.js","components/LevelSelector/LevelSelector.js","components/Timer/Timer.js","components/Counter/Counter.js","components/Status/Status.js","components/TopBar/TopBar.js","components/Cell/Cell.js","functions.js","components/Field/Field.js","components/App/App.js","serviceWorker.js","reducers/rootReducer.js","index.js"],"names":["module","exports","LEVELS","id","name","rows","cols","mines","setStatusAction","status","type","payload","resetGameAction","level","openCellsAction","pressCellsAction","LevelSelector","dispatch","useDispatch","className","classes","map","item","value","onClick","key","Timer","useSelector","state","useState","timer","setTimer","useEffect","interval","setInterval","clearInterval","Counter","cells","filter","cell","isMine","length","isFlag","Status","cls","join","TopBar","Cell","onCellMouseDown","onCellMouseUp","onCellClick","push","closed","isOpen","mine","detonated","minesNext","flag","red","green","gray","isPressed","onMouseDown","event","onMouseUp","onContextMenu","initialCells","r","c","row","col","minesLeft","rand","Math","floor","random","cell2","isNext","cell1","dc","abs","dr","getCell","currentCells","shift","countFlagsNext","currentCell","findNextCells","foundCells","isSearchTree","resultCells","indexOf","forEach","Field","preventDefault","button","flagCellAction","newStatus","count1","count2","checkStatus","App","container","Boolean","window","location","hostname","match","initialState","store","createStore","action","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.1d2fe2ea.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Cell\":\"Cell_Cell__3a2AI\",\"closed\":\"Cell_closed__1Vnz5\",\"detonated\":\"Cell_detonated__3a9rG\",\"mine\":\"Cell_mine__3rqDz\",\"flag\":\"Cell_flag__2UxyW\",\"red\":\"Cell_red__1AnuW\",\"green\":\"Cell_green__3-pnt\",\"gray\":\"Cell_gray__2e-41\",\"count-1\":\"Cell_count-1__w15rZ\",\"count-2\":\"Cell_count-2___KyXA\",\"count-3\":\"Cell_count-3__3gyIk\",\"count-4\":\"Cell_count-4__3iwcL\",\"count-5\":\"Cell_count-5__3PKEA\",\"count-6\":\"Cell_count-6__1JEC4\",\"count-7\":\"Cell_count-7__1mztp\",\"count-8\":\"Cell_count-8__3Pbsz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Status\":\"Status_Status__3LbjR\",\"Status-0\":\"Status_Status-0__20QTR\",\"Status-1\":\"Status_Status-1__3d6-3\",\"Status-2\":\"Status_Status-2__1cT-k\",\"Status-3\":\"Status_Status-3__3jJ5k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Field\":\"Field_Field__J5WFY\",\"Field-0\":\"Field_Field-0__1QInY\",\"Field-1\":\"Field_Field-1__QMBQ8\",\"Field-2\":\"Field_Field-2__tpg8R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__1m-2P\",\"container-0\":\"App_container-0__16Oew\",\"container-1\":\"App_container-1__FUxMw\",\"container-2\":\"App_container-2__Gzgk_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LevelSelector\":\"LevelSelector_LevelSelector__2V93N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Timer\":\"Timer_Timer__3HMJo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Counter\":\"Counter_Counter__3sKWP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TopBar\":\"TopBar_TopBar__1hGHN\"};","export const LEVELS = [\r\n  {\r\n    id: 0,\r\n    name: 'Beginner',\r\n    rows: 8,\r\n    cols: 8,\r\n    mines: 10,\r\n  },\r\n  {\r\n    id: 1,\r\n    name: 'Intermediate',\r\n    rows: 16,\r\n    cols: 16,\r\n    mines: 40,\r\n  },\r\n  {\r\n    id: 2,\r\n    name: 'Expert',\r\n    rows: 16,\r\n    cols: 30,\r\n    mines: 99,\r\n  },\r\n];\r\n\r\nexport const SET_STATUS = 'SET_STATUS';\r\nexport const RESET_GAME = 'RESET_GAME';\r\nexport const FLAG_CELL = 'FLAG_CELL';\r\nexport const OPEN_CELLS = 'OPEN_CELLS';\r\nexport const PRESS_CELLS = 'PRESS_CELLS';\r\n\r\nexport const STATUS_NEW = 0;\r\nexport const STATUS_PLAY = 1;\r\nexport const STATUS_WIN = 2;\r\nexport const STATUS_LOST = 3;\r\n","import { FLAG_CELL, OPEN_CELLS, PRESS_CELLS, RESET_GAME, SET_STATUS } from './consts';\r\n\r\nexport const setStatusAction = status => {\r\n  return {\r\n    type: SET_STATUS,\r\n    payload: status,\r\n  };\r\n};\r\n\r\nexport const resetGameAction = level => {\r\n  return {\r\n    type: RESET_GAME,\r\n    payload: level,\r\n  };\r\n};\r\n\r\nexport const flagCellAction = id => {\r\n  return {\r\n    type: FLAG_CELL,\r\n    payload: id,\r\n  };\r\n};\r\n\r\nexport const openCellsAction = id => {\r\n  return {\r\n    type: OPEN_CELLS,\r\n    payload: id,\r\n  };\r\n};\r\n\r\nexport const pressCellsAction = id => {\r\n  return {\r\n    type: PRESS_CELLS,\r\n    payload: id,\r\n  };\r\n};","import React from 'react';\r\nimport { LEVELS } from '../../consts';\r\nimport { useDispatch } from 'react-redux';\r\nimport { resetGameAction } from '../../actions';\r\nimport classes from './LevelSelector.module.css';\r\n\r\nexport const LevelSelector = () => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <div className={classes.LevelSelector}>\r\n      {\r\n        LEVELS.map(item => <input\r\n          type=\"button\"\r\n          value={item.name}\r\n          onClick={() => dispatch(resetGameAction(item.id))}\r\n          key={item.id}\r\n        />)\r\n      }\r\n    </div>\r\n  );\r\n  \r\n};","import React, { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { STATUS_NEW, STATUS_PLAY } from '../../consts';\r\nimport classes from './Timer.module.css';\r\n\r\nexport const Timer = () => {\r\n\r\n  const status = useSelector(state => state.status);\r\n\r\n  const [timer, setTimer] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (STATUS_NEW === status) {\r\n      setTimer(0);\r\n    } else if (STATUS_PLAY === status) {\r\n      const interval = setInterval(() => {\r\n        setTimer(value => value + 1);\r\n      }, 1000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [status]);\r\n\r\n  return (\r\n    <div className={classes.Timer}>\r\n      {timer}\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport classes from './Counter.module.css';\r\n\r\nexport const Counter = () => {\r\n\r\n  const cells = useSelector(state => state.cells);\r\n\r\n  return (\r\n    <div className={classes.Counter}>\r\n      {cells.filter(cell => cell.isMine).length - cells.filter(cell => cell.isFlag).length}\r\n    </div>\r\n  );\r\n  \r\n};","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { resetGameAction } from '../../actions';\r\nimport classes from './Status.module.css';\r\n\r\nexport const Status = () => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const status = useSelector(state => state.status);\r\n  const level = useSelector(state => state.level);\r\n\r\n  const cls = [classes.Status, classes['Status-' + status]];\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        className={cls.join(' ')}\r\n        onClick={() => dispatch(resetGameAction(level))}\r\n      />\r\n    </div>\r\n  );\r\n\r\n};","import React from 'react';\r\nimport { Timer } from '../Timer/Timer';\r\nimport { Counter } from '../Counter/Counter';\r\nimport { Status } from '../Status/Status';\r\nimport classes from './TopBar.module.css';\r\n\r\nexport const TopBar = () => {\r\n  return (\r\n    <div className={classes.TopBar}>\r\n      <Counter />\r\n      <Status />\r\n      <Timer />\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\nimport { STATUS_NEW, STATUS_PLAY, STATUS_WIN, STATUS_LOST } from '../../consts';\r\nimport classes from './Cell.module.css';\r\n\r\nexport const Cell = ({ cell, status, onCellMouseDown, onCellMouseUp, onCellClick }) => {\r\n  let cls = [classes.Cell];\r\n\r\n  if (STATUS_NEW === status) {\r\n    cls.push(classes.closed);\r\n  } else if (!cell.isOpen) {\r\n    if (cell.isFlag) {\r\n      if (STATUS_PLAY === status) {\r\n        cls.push(classes.closed, classes.flag, classes.red);\r\n      } else if ((STATUS_WIN === status) || (STATUS_LOST === status)) {\r\n        if (cell.isMine) {\r\n          cls.push(classes.closed, classes.flag, classes.green);\r\n        } else {\r\n          cls.push(classes.closed, classes.flag, classes.gray);\r\n        }\r\n      }\r\n    } else if (cell.isMine) {\r\n      if (STATUS_LOST === status) {\r\n        cls.push(classes.mine);\r\n      } else {\r\n        if (!cell.isPressed) {\r\n          cls.push(classes.closed);\r\n        }\r\n      }\r\n    } else {\r\n      if (!cell.isPressed) {\r\n        cls.push(classes.closed);\r\n      }\r\n    }\r\n  } else {\r\n    if (cell.isMine) {\r\n      cls.push(classes.mine, classes.detonated);\r\n    } else if (0 !== cell.minesNext) {\r\n      cls.push(classes['count-' + cell.minesNext]);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={cls.join(' ')}\r\n      onMouseDown={event => onCellMouseDown(event, cell.id)}\r\n      onMouseUp={event => onCellMouseUp(event, cell.id)}\r\n      onClick={event => onCellClick(event, cell.id)}\r\n      onContextMenu={event => onCellClick(event, cell.id)}\r\n    />\r\n  );\r\n};\r\n","import { STATUS_LOST, STATUS_WIN } from \"./consts\";\r\n\r\nexport const initialCells = ({ rows, cols, mines }) => {\r\n  let cells = [];\r\n\r\n  for (let r = 0; r < rows; r++) {\r\n    for (let c = 0; c < cols; c++) {\r\n      cells.push({\r\n        id: r * cols + c,\r\n        row: r,\r\n        col: c,\r\n        isOpen: false,\r\n        isMine: false,\r\n        isFlag: false,\r\n        isPressed: false,\r\n        minesNext: 0,\r\n      });\r\n    }\r\n  }\r\n\r\n  let minesLeft = mines;\r\n\r\n  while (minesLeft > 0) {\r\n    let rand = Math.floor(Math.random() * cells.length);\r\n    if (!cells[rand].isMine) {\r\n      cells[rand].isMine = true;\r\n      minesLeft--;\r\n    }\r\n  }\r\n\r\n  cells.map(cell => {\r\n    cell.minesNext = cells.filter(cell2 => isNext(cell, cell2) && cell2.isMine).length;\r\n    return cell;\r\n  });\r\n\r\n  return cells;\r\n};\r\n\r\n\r\nexport const isNext = (cell1, cell2) => {\r\n  const dc = Math.abs(cell1.col - cell2.col);\r\n  const dr = Math.abs(cell1.row - cell2.row);\r\n  return (dc === 1 && dr === 1) || (dc === 0 && dr === 1) || (dc === 1 && dr === 0);\r\n};\r\n\r\n\r\nexport const getCell = (currentCells, id) => {\r\n  return currentCells.filter(cell => cell.id === id).shift();\r\n};\r\n\r\n\r\nexport const checkStatus = (currentCells) => {\r\n  if (0 !== currentCells.filter(cell => cell.isOpen && cell.isMine).length) {\r\n    return STATUS_LOST;\r\n  } else {\r\n    const count1 = currentCells.filter(cell => cell.isMine && !cell.isFlag).length;\r\n    const count2 = currentCells.filter(cell => !cell.isMine && !cell.isOpen).length;\r\n    if ((0 === count1) && (0 === count2)) {\r\n      return STATUS_WIN;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n};\r\n\r\n\r\nexport const countFlagsNext = (currentCells, id) => {\r\n  const currentCell = getCell(currentCells, id);\r\n  return currentCells.filter(cell => isNext(cell, currentCell) && cell.isFlag).length;\r\n};\r\n\r\n\r\nexport const findNextCells = (currentCells, id, foundCells, isSearchTree) => {\r\n  const currentCell = getCell(currentCells, id);\r\n\r\n  const resultCells = currentCells.filter(\r\n    cell => isNext(cell, currentCell)\r\n      &&\r\n      !cell.isOpen\r\n      &&\r\n      !cell.isFlag\r\n      &&\r\n      -1 === foundCells.indexOf(cell.id)\r\n  );\r\n\r\n  resultCells.forEach(cell => {\r\n    foundCells.push(cell.id);\r\n  });\r\n\r\n  if (isSearchTree) {\r\n    resultCells\r\n      .filter(cell => (0 === cell.minesNext))\r\n      .forEach(cell => findNextCells(currentCells, cell.id, foundCells, isSearchTree)\r\n        .forEach(cell => resultCells.push(cell))\r\n      );\r\n  }\r\n\r\n  return resultCells;\r\n};\r\n","import React from 'react';\r\nimport { STATUS_NEW, STATUS_PLAY, STATUS_WIN, STATUS_LOST } from '../../consts';\r\nimport { Cell } from '../../components/Cell/Cell';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { flagCellAction, openCellsAction, pressCellsAction, setStatusAction } from '../../actions';\r\nimport { getCell, findNextCells, countFlagsNext, checkStatus } from '../../functions';\r\nimport classes from './Field.module.css';\r\n\r\nexport const Field = () => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const level = useSelector(state => state.level);\r\n  const cells = useSelector(state => state.cells);\r\n  const status = useSelector(state => state.status);\r\n\r\n  const onCellMouseDown = (event, id) => {\r\n    event.preventDefault();\r\n\r\n    if (STATUS_NEW === status) {\r\n      dispatch(setStatusAction(STATUS_PLAY));\r\n    }\r\n\r\n    if ((STATUS_WIN === status) || (STATUS_LOST === status)) {\r\n      return;\r\n    }\r\n\r\n    const currentCell = getCell(cells, id);\r\n\r\n    if (2 === event.button) {\r\n      if (!currentCell.isOpen) {\r\n        dispatch(flagCellAction(id));\r\n      }\r\n    } else {\r\n      if (!currentCell.isOpen) {\r\n        if (!currentCell.isFlag) {\r\n          dispatch(pressCellsAction([id]));\r\n        }\r\n      } else {\r\n        dispatch(pressCellsAction(findNextCells(cells, id, [], false).map(cell => cell.id)));\r\n      }\r\n    }\r\n  }\r\n\r\n  const onCellMouseUp = (event, id) => {\r\n    event.preventDefault();\r\n\r\n    if ((STATUS_WIN === status) || (STATUS_LOST === status)) {\r\n      return;\r\n    }\r\n\r\n    const currentCell = getCell(cells, id);\r\n\r\n    if (2 === event.button) {\r\n\r\n    } else {\r\n      if (!currentCell.isOpen) {\r\n        if (!currentCell.isFlag) {\r\n          dispatch(openCellsAction([id]));\r\n          if (currentCell.isMine) {\r\n            dispatch(setStatusAction(STATUS_LOST));\r\n          } else {\r\n            if ((countFlagsNext(cells, id) === currentCell.minesNext) || (0 === currentCell.minesNext)) {\r\n              dispatch(openCellsAction(findNextCells(cells, id, [], true).map(cell => cell.id)));\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        dispatch(pressCellsAction(findNextCells(cells, id, [], false).map(cell => cell.id)));\r\n        if (countFlagsNext(cells, id) === currentCell.minesNext) {\r\n          dispatch(openCellsAction(findNextCells(cells, id, [], true).map(cell => cell.id)));\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  const onCellClick = (event, id) => {\r\n    event.preventDefault();\r\n\r\n    const newStatus = checkStatus(cells);\r\n\r\n    if (null !== newStatus) {\r\n      dispatch(setStatusAction(newStatus));\r\n    }\r\n  };\r\n\r\n  const cls = [classes.Field, classes['Field-' + level]];\r\n\r\n  return (\r\n    <div className={cls.join(' ')}>\r\n      {\r\n        cells.map(\r\n          cell => <Cell\r\n            key={cell.id}\r\n            cell={cell}\r\n            status={status}\r\n            onCellMouseDown={onCellMouseDown}\r\n            onCellMouseUp={onCellMouseUp}\r\n            onCellClick={onCellClick}\r\n          />\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { LevelSelector } from '../LevelSelector/LevelSelector';\r\nimport { TopBar } from '../TopBar/TopBar';\r\nimport { Field } from '../Field/Field';\r\nimport classes from './App.module.css';\r\n\r\nfunction App() {\r\n  const level = useSelector(state => state.level);\r\n\r\n  const cls = [classes.container, classes['container-' + level]];\r\n\r\n  return (\r\n    <div className={cls.join(' ')}>\r\n      <TopBar />\r\n      <Field />\r\n      <LevelSelector />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { FLAG_CELL, LEVELS, OPEN_CELLS, PRESS_CELLS, RESET_GAME, SET_STATUS, STATUS_NEW } from '../consts';\r\nimport { initialCells } from '../functions';\r\n\r\nconst initialState = {\r\n  level: 1,\r\n  status: STATUS_NEW,\r\n  cells: initialCells(LEVELS[1]),\r\n};\r\n\r\nexport const rootReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case RESET_GAME:\r\n      return {\r\n        ...state,\r\n        level: action.payload,\r\n        status: initialState.status,\r\n        cells: initialCells(LEVELS[action.payload]),\r\n      };\r\n    case SET_STATUS:\r\n      return {\r\n        ...state,\r\n        status: action.payload,\r\n      };\r\n    case FLAG_CELL:\r\n      return {\r\n        ...state,\r\n        cells: state.cells.map(\r\n          cell => cell.id === action.payload\r\n            ? {\r\n              ...cell,\r\n              isFlag: !cell.isFlag,\r\n            }\r\n            : cell\r\n        ),\r\n      };\r\n    case OPEN_CELLS:\r\n      return {\r\n        ...state,\r\n        cells: state.cells.map(\r\n          cell => -1 !== action.payload.indexOf(cell.id)\r\n            ? {\r\n              ...cell,\r\n              isOpen: true,\r\n            }\r\n            : cell\r\n        ),\r\n      };\r\n    case PRESS_CELLS:\r\n      return {\r\n        ...state,\r\n        cells: state.cells.map(\r\n          cell => -1 !== action.payload.indexOf(cell.id)\r\n            ? {\r\n              ...cell,\r\n              isPressed: !cell.isPressed,\r\n            }\r\n            : cell\r\n        ),\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { createStore } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport { rootReducer } from './reducers/rootReducer';\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>\r\n  , document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}